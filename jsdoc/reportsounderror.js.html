<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Experigen documentation</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link href="styles/bootstrap.css" rel="stylesheet">
    <link href="styles/docs.css" rel="stylesheet">
    <link href="styles/bootstrap-custom.css" rel="stylesheet">
    <link href="http://netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.css" rel="stylesheet">
    <script src="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/js/bootstrap.min.js"></script>
  </head>
  <body>
    <header class="header navbar navbar-inverse">
      <div class="navbar-inner">
        <div class="container-fluid">
          <a class="brand" href="#"><strong>Experigen</strong> documentation</a>
        </div>
      </div>
    </header>

    <div class="container-fluid">
      <div class="row-fluid">
          <div class="span4">
              <h2><a href="index.html">Index</a></h2><div class="well well-small"><ul class="nav nav-list"><li class="nav-header">Classes</li><li><a href="Array.html"><i class="icon-shield" style="color: #0186d1"></i> Array</a></li><li><a href="Experigen.new_progressbar.html"><i class="icon-shield" style="color: #0186d1"></i> new_progressbar</a></li><li><a href="Experigen.trial.html"><i class="icon-shield" style="color: #0186d1"></i> trial</a></li><li><a href="WavPlayer.html"><i class="icon-shield" style="color: #0186d1"></i> WavPlayer</a></li></ul></div><div class="well well-small"><ul class="nav nav-list"><li class="nav-header">Global</li><li><a href="global.html#jsonp_url"><i class="icon-globe" style="color: black;"></i> jsonp_url</a></li></ul></div>
          </div>

          <div class="span8">
              <h1 class="page-header">Source: plugins/reportsounderror.js</h1>
              



    
    <section>
        <article>
            <pre class="prettyprint source"><code>/**
 * @file A plugin that adds a "report sound error" link in the footer.
 */

/**
 * Adds a report sound problem button to the bottom of the main wrapper. The label
 * is "Report a problem with the sound file" or it can be manually set in 
 * Experigen.settings.pluginsettings.reportsounderror
 * @param trial
 */


Experigen.addScreenPlugin(function(trial){
	var append = function(){
		if(trial.mo) trial.mo.disconnect();
		if(trial.soundbuttons.length &lt; 1) return;
		var s = {};
		if(Experigen.settings.pluginsettings)
			if(Experigen.settings.pluginsettings.reportsounderror)
				s = Experigen.settings.pluginsettings.reportsounderror;
		var label = s.label || "Report a problem with the sound file";
		$("#main").append("&lt;div id='reportsoundproblem' style='text-align: left;display: block; margin:20px;'>&lt;/div>");
		label = "&lt;input type='button' onclick='Experigen.screen().reportSoundProblem();' value='" + label + "'>";
		$("#reportsoundproblem").html(label);
	}

	/**
	 * Appends a text box to report anything and advances the screen
	 */
	var reportSoundProblem = function(){
		var rep = "&lt;p>Could you explain what the problem is specifically?&lt;/p>&lt;input type='text' name='rspexplain' size='50' value='The sound file did not play.' onfocus='this.value=\"\";'>";
		rep += "&lt;input type='submit' onclick='Experigen.screen().rspSubmit();return false;'>";
		$("#reportsoundproblem").html(rep);
	};

	var rspSubmit = function(){
		var str = "&lt;input type='hidden' name='soundproblem' value='" + $("input[name='rspexplain']").val() + "'>"; 
		$("#currentform").append(str);
		//	$("#reportsoundproblem").remove();
		Experigen.recordResponse();
	};

	if(MutationObserver){
		trial.mo = new MutationObserver(append); 
		trial.mo.observe($("#main")[0], {childList: true});
	}
	else{
		$("#main").on("DOMNodeInserted", append);
	}

	trial.reportSoundProblem = reportSoundProblem;
	trial.rspSubmit = rspSubmit;
	/*	trial.reportsounderror_saved_advance = trial.advance;
		trial.advance = function(spec){
		if (Experigen.screen().currentPart > Experigen.screen().parts.length)
		$("#reportsoundproblem").remove();
		return Experigen.screen().reportsounderror_saved_advance(spec);
		};*/
});
</code></pre>
        </article>
    </section>




          </div>
      </div>

        <br clear="both">

      <footer>
		Experigen documentation, Daniel Szeredi 2014.
		<br>
        Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.3.0-dev</a> on Sun Sep 28 2014 23:23:50 GMT-0400 (EDT)
        <br>
      </footer>
      <script> prettyPrint(); </script>
    </div>
  </body>
</html>
